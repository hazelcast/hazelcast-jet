<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (15) on Mon Feb 01 17:53:40 CET 2021 -->
<title>StreamSourceStage (hazelcast-jet-distribution 4.4 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-02-01">
<meta name="description" content="declaration: package: com.hazelcast.jet.pipeline, interface: StreamSourceStage">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":6,"i1":6,"i2":6,"i3":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/StreamSourceStage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.hazelcast.jet.pipeline</a></div>
<h1 title="Interface StreamSourceStage" class="title">Interface StreamSourceStage&lt;T&gt;</h1>
</div>
<section class="description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the type of items coming out of this stage</dd>
</dl>
<hr>
<pre>public interface <span class="type-name-label">StreamSourceStage&lt;T&gt;</span></pre>
<div class="block">A source stage in a distributed computation <a href="Pipeline.html" title="interface in com.hazelcast.jet.pipeline"><code>pipeline</code></a>
 that will observe an unbounded amount of data (i.e., an event stream).
 Timestamp handling, a prerequisite for attaching data processing stages,
 is not yet defined in this step. Call one of the methods on this
 instance to declare whether and how the data source will assign
 timestamps to events.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>3.0</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t3" class="table-tab" onclick="show(4);">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code><a href="StreamStage.html" title="interface in com.hazelcast.jet.pipeline">StreamStage</a>&lt;<a href="StreamSourceStage.html" title="type parameter in StreamSourceStage">T</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#withIngestionTimestamps()">withIngestionTimestamps</a></span>()</code></th>
<td class="col-last">
<div class="block">Declares that the source will assign the time of ingestion as the event
 timestamp.</div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code><a href="StreamStage.html" title="interface in com.hazelcast.jet.pipeline">StreamStage</a>&lt;<a href="StreamSourceStage.html" title="type parameter in StreamSourceStage">T</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#withNativeTimestamps(long)">withNativeTimestamps</a></span>&#8203;(long&nbsp;allowedLag)</code></th>
<td class="col-last">
<div class="block">Declares that the stream will use the source's native timestamps.</div>
</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code><a href="StreamStage.html" title="interface in com.hazelcast.jet.pipeline">StreamStage</a>&lt;<a href="StreamSourceStage.html" title="type parameter in StreamSourceStage">T</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#withoutTimestamps()">withoutTimestamps</a></span>()</code></th>
<td class="col-last">
<div class="block">Declares that the source will not assign any timestamp to the events it
 emits.</div>
</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code><a href="StreamStage.html" title="interface in com.hazelcast.jet.pipeline">StreamStage</a>&lt;<a href="StreamSourceStage.html" title="type parameter in StreamSourceStage">T</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#withTimestamps(com.hazelcast.function.ToLongFunctionEx,long)">withTimestamps</a></span>&#8203;(<a href="../../function/ToLongFunctionEx.html" title="interface in com.hazelcast.function">ToLongFunctionEx</a>&lt;? super <a href="StreamSourceStage.html" title="type parameter in StreamSourceStage">T</a>&gt;&nbsp;timestampFn,
long&nbsp;allowedLag)</code></th>
<td class="col-last">
<div class="block">Declares that the source will extract timestamps from the stream items.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="withoutTimestamps()">
<h3>withoutTimestamps</h3>
<div class="member-signature"><span class="return-type"><a href="StreamStage.html" title="interface in com.hazelcast.jet.pipeline">StreamStage</a>&lt;<a href="StreamSourceStage.html" title="type parameter in StreamSourceStage">T</a>&gt;</span>&nbsp;<span class="member-name">withoutTimestamps</span>()</div>
<div class="block">Declares that the source will not assign any timestamp to the events it
 emits. You can add them later using <a href="GeneralStage.html#addTimestamps(com.hazelcast.function.ToLongFunctionEx,long)"><code>addTimestamps</code></a>,
 but the behavior is different &mdash; see the note there.</div>
</section>
</li>
<li>
<section class="detail" id="withIngestionTimestamps()">
<h3>withIngestionTimestamps</h3>
<div class="member-signature"><span class="return-type"><a href="StreamStage.html" title="interface in com.hazelcast.jet.pipeline">StreamStage</a>&lt;<a href="StreamSourceStage.html" title="type parameter in StreamSourceStage">T</a>&gt;</span>&nbsp;<span class="member-name">withIngestionTimestamps</span>()</div>
<div class="block">Declares that the source will assign the time of ingestion as the event
 timestamp. It will call <code>System.currentTimeMillis()</code> at the moment
 it observes an event from the data source and assign it as the event
 timestamp. The actual time of the original event is ignored.
 <p>
 With this mode, unlike <a href="#withTimestamps(com.hazelcast.function.ToLongFunctionEx,long)"><code>withTimestamps(com.hazelcast.function.ToLongFunctionEx&lt;? super T&gt;, long)</code></a> or <a href="#withNativeTimestamps(long)"><code>withNativeTimestamps(long)</code></a>, the <em>sparse events issue</em> isn't present.
 You can use this mode to avoid the issue, but there's a caveat:
 <p>
 <strong>Note:</strong> when snapshotting is enabled to achieve fault
 tolerance, after a restart Jet replays all the events that were already
 processed since the last snapshot. These events will then get different
 timestamps. If you want your job to be fault-tolerant, the events in the
 stream must have a stable timestamp associated with them. The source may
 natively provide such timestamps (the <a href="#withNativeTimestamps(long)"><code>withNativeTimestamps(long)</code></a>
 option). If that is not appropriate, the events should carry their own
 timestamp as a part of their data and you can use <a href="#withTimestamps(com.hazelcast.function.ToLongFunctionEx,long)"><code>withTimestamps(timestampFn, allowedLag</code></a> to extract it.
 <p>
 <strong>Note 2:</strong> if the system time goes back (such as when
 adjusting it), newer events will get older timestamps and might be
 dropped as late, because the allowed lag is 0.</div>
</section>
</li>
<li>
<section class="detail" id="withNativeTimestamps(long)">
<h3>withNativeTimestamps</h3>
<div class="member-signature"><span class="return-type"><a href="StreamStage.html" title="interface in com.hazelcast.jet.pipeline">StreamStage</a>&lt;<a href="StreamSourceStage.html" title="type parameter in StreamSourceStage">T</a>&gt;</span>&nbsp;<span class="member-name">withNativeTimestamps</span>&#8203;(<span class="parameters">long&nbsp;allowedLag)</span></div>
<div class="block">Declares that the stream will use the source's native timestamps. This
 is typically the message timestamp that the external system assigns as
 event's metadata.
 <p>
 If there's no notion of native timestamps in the source, this method
 will throw a <a href="../JetException.html" title="class in com.hazelcast.jet"><code>JetException</code></a>.
 <p>
 <b>Issue with sparse events</b>
 <p>
 Event time progresses only through the ingestion of new events. If the
 events are sparse, time will effectively stop until a newer event
 arrives. This causes high latency for time-sensitive operations (such as
 window aggregation). In addition, Jet tracks event time for every source
 partition separately, and if just one partition has sparse events, time
 progress in the whole job is hindered.
 <p>
 To overcome this you can either ensure there's a consistent influx of
 events in every partition, or you can use <a href="#withIngestionTimestamps()"><code>withIngestionTimestamps()</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>allowedLag</code> - the allowed lag of a given event's timestamp behind the top
                   timestamp value observed so far</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="withTimestamps(com.hazelcast.function.ToLongFunctionEx,long)">
<h3>withTimestamps</h3>
<div class="member-signature"><span class="return-type"><a href="StreamStage.html" title="interface in com.hazelcast.jet.pipeline">StreamStage</a>&lt;<a href="StreamSourceStage.html" title="type parameter in StreamSourceStage">T</a>&gt;</span>&nbsp;<span class="member-name">withTimestamps</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html" title="class or interface in javax.annotation" class="external-link">@Nonnull</a>
<a href="../../function/ToLongFunctionEx.html" title="interface in com.hazelcast.function">ToLongFunctionEx</a>&lt;? super <a href="StreamSourceStage.html" title="type parameter in StreamSourceStage">T</a>&gt;&nbsp;timestampFn,
long&nbsp;allowedLag)</span></div>
<div class="block">Declares that the source will extract timestamps from the stream items.
 <p>
 <b>Issue with sparse events</b>
 <p>
 Event time progresses only through the ingestion of new events. If the
 events are sparse, time will effectively stop until a newer event
 arrives. This causes high latency for time-sensitive operations (such as
 window aggregation). In addition, Jet tracks event time for every source
 partition separately, and if just one partition has sparse events, time
 progress in the whole job is hindered.
 <p>
 To overcome this you can either ensure there's a consistent influx of
 events in every partition, or you can use <a href="#withIngestionTimestamps()"><code>withIngestionTimestamps()</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>timestampFn</code> - a function that returns the timestamp for each item, typically in
                    milliseconds. It must be stateless and <a href="../core/Processor.html#isCooperative()">cooperative</a>.</dd>
<dd><code>allowedLag</code> - the allowed lag of a given event's timestamp behind the top
                   timestamp value observed so far. The time unit is
                   the same as the unit used by <code>timestampFn</code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/StreamSourceStage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
<p class="legal-copy"><small>Copyright &#169; 2021 <a href="http://www.hazelcast.com/">Hazelcast, Inc.</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
