<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (14) on Tue Oct 20 10:39:30 CEST 2020 -->
<title>ServiceFactories (hazelcast-jet-distribution 4.3 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-10-20">
<meta name="description" content="declaration: package: com.hazelcast.jet.pipeline, class: ServiceFactories">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ServiceFactories.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.hazelcast.jet.pipeline</a></div>
<h1 title="Class ServiceFactories" class="title">Class ServiceFactories</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a>
<div class="inheritance">com.hazelcast.jet.pipeline.ServiceFactories</div>
</div>
<section class="description">
<hr>
<pre>public final class <span class="typeNameLabel">ServiceFactories</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">Utility class with methods that create several useful <a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline"><code>service factories</code></a>.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.0</dd>
</dl>
</section>
<section class="summary">
<ul class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>static &lt;K,&#8203;
V&gt;&nbsp;<a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;<a href="../../map/IMap.html" title="interface in com.hazelcast.map">IMap</a>&lt;K,&#8203;V&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#iMapService(java.lang.String)">iMapService</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;mapName)</code></th>
<td class="colLast">
<div class="block">Returns a factory that provides an <a href="../../map/IMap.html" title="interface in com.hazelcast.map"><code>IMap</code></a> as the service.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>static &lt;S&gt;&nbsp;<a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;S&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nonSharedService(com.hazelcast.function.FunctionEx)">nonSharedService</a></span>&#8203;(<a href="../../function/FunctionEx.html" title="interface in com.hazelcast.function">FunctionEx</a>&lt;? super <a href="../core/Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>,&#8203;? extends S&gt;&nbsp;createServiceFn)</code></th>
<td class="colLast">
<div class="block">A variant of <a href="#nonSharedService(com.hazelcast.function.FunctionEx,com.hazelcast.function.ConsumerEx)"><code>nonSharedService(createFn, destroyFn)</code></a> with a no-op <code>
 destroyFn</code>.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>static &lt;S&gt;&nbsp;<a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;S&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#nonSharedService(com.hazelcast.function.FunctionEx,com.hazelcast.function.ConsumerEx)">nonSharedService</a></span>&#8203;(<a href="../../function/FunctionEx.html" title="interface in com.hazelcast.function">FunctionEx</a>&lt;? super <a href="../core/Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>,&#8203;? extends S&gt;&nbsp;createServiceFn,
<a href="../../function/ConsumerEx.html" title="interface in com.hazelcast.function">ConsumerEx</a>&lt;? super S&gt;&nbsp;destroyServiceFn)</code></th>
<td class="colLast">
<div class="block">Returns a <a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline"><code>ServiceFactory</code></a> which creates a separate service
 instance for each parallel Jet processor.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>static &lt;K,&#8203;
V&gt;&nbsp;<a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;<a href="../../replicatedmap/ReplicatedMap.html" title="interface in com.hazelcast.replicatedmap">ReplicatedMap</a>&lt;K,&#8203;V&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#replicatedMapService(java.lang.String)">replicatedMapService</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;mapName)</code></th>
<td class="colLast">
<div class="block">Returns a factory that provides a <a href="../../replicatedmap/ReplicatedMap.html" title="interface in com.hazelcast.replicatedmap"><code>ReplicatedMap</code></a> as the service
 object.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>static &lt;S&gt;&nbsp;<a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;S&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sharedService(com.hazelcast.function.FunctionEx)">sharedService</a></span>&#8203;(<a href="../../function/FunctionEx.html" title="interface in com.hazelcast.function">FunctionEx</a>&lt;? super <a href="../core/ProcessorSupplier.Context.html" title="interface in com.hazelcast.jet.core">ProcessorSupplier.Context</a>,&#8203;S&gt;&nbsp;createServiceFn)</code></th>
<td class="colLast">
<div class="block">A variant of <a href="#sharedService(com.hazelcast.function.FunctionEx,com.hazelcast.function.ConsumerEx)"><code>sharedService(createFn, destroyFn)</code></a> with a no-op <code>
 destroyFn</code>.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>static &lt;S&gt;&nbsp;<a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;S&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sharedService(com.hazelcast.function.FunctionEx,com.hazelcast.function.ConsumerEx)">sharedService</a></span>&#8203;(<a href="../../function/FunctionEx.html" title="interface in com.hazelcast.function">FunctionEx</a>&lt;? super <a href="../core/ProcessorSupplier.Context.html" title="interface in com.hazelcast.jet.core">ProcessorSupplier.Context</a>,&#8203;S&gt;&nbsp;createServiceFn,
<a href="../../function/ConsumerEx.html" title="interface in com.hazelcast.function">ConsumerEx</a>&lt;S&gt;&nbsp;destroyServiceFn)</code></th>
<td class="colLast">
<div class="block">Returns a <a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline"><code>ServiceFactory</code></a> which will provide a single shared
 service object per cluster member.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="replicatedMapService(java.lang.String)">replicatedMapService</a></h3>
<div class="memberSignature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
</span><span class="modifiers">public static</span>&nbsp;<span class="typeParameters">&lt;K,&#8203;
V&gt;</span>
<span class="returnType"><a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;<a href="../../replicatedmap/ReplicatedMap.html" title="interface in com.hazelcast.replicatedmap">ReplicatedMap</a>&lt;K,&#8203;V&gt;&gt;</span>&nbsp;<span class="memberName">replicatedMapService</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;mapName)</span></div>
<div class="block">Returns a factory that provides a <a href="../../replicatedmap/ReplicatedMap.html" title="interface in com.hazelcast.replicatedmap"><code>ReplicatedMap</code></a> as the service
 object. A replicated map is a particularly good choice if you are
 enriching an event stream with the data stored in the Hazelcast Jet
 cluster. Unlike in a <code>hashJoin</code> transformation, the data in the
 map can change while the job is running so you can keep the enriching
 dataset up-to-date. Unlike <code>IMap</code>, the data you access is local so
 you won't do any blocking calls using it (important for performance).
 <p>
 If you want to destroy the map after the job finishes, call
 <code>factory.destroyFn(ReplicatedMap::destroy)</code> on the object you get
 from this method.
 <p>
 Example usage (without destroyFn):
 <pre>
 p.readFrom( /* a batch or streaming source &#42;/ )
  .mapUsingService(replicatedMapService("fooMapName"),
      (map, item) -> tuple2(item, map.get(item.getKey())))
  .destroyFn(ReplicatedMap::destroy);
 </pre></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>K</code> - type of the map key</dd>
<dd><code>V</code> - type of the map value</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mapName</code> - name of the <a href="../../replicatedmap/ReplicatedMap.html" title="interface in com.hazelcast.replicatedmap"><code>ReplicatedMap</code></a> to use as the service</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.0</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="iMapService(java.lang.String)">iMapService</a></h3>
<div class="memberSignature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
</span><span class="modifiers">public static</span>&nbsp;<span class="typeParameters">&lt;K,&#8203;
V&gt;</span>&nbsp;<span class="returnType"><a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;<a href="../../map/IMap.html" title="interface in com.hazelcast.map">IMap</a>&lt;K,&#8203;V&gt;&gt;</span>&nbsp;<span class="memberName">iMapService</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;mapName)</span></div>
<div class="block">Returns a factory that provides an <a href="../../map/IMap.html" title="interface in com.hazelcast.map"><code>IMap</code></a> as the service. This
 is useful if you are enriching an event stream with the data stored in
 the Hazelcast Jet cluster. Unlike in a <code>hashJoin</code> transformation,
 the data in the map can change while the job is running so you can keep
 the enriching dataset up-to-date.
 <p>
 Instead of using this factory, you can call <a href="GeneralStage.html#mapUsingIMap(com.hazelcast.map.IMap,com.hazelcast.function.FunctionEx,com.hazelcast.function.BiFunctionEx)"><code>GeneralStage.mapUsingIMap(IMap, FunctionEx, BiFunctionEx)</code></a> or <a href="GeneralStageWithKey.html#mapUsingIMap(com.hazelcast.map.IMap,com.hazelcast.function.BiFunctionEx)"><code>GeneralStageWithKey.mapUsingIMap(IMap, BiFunctionEx)</code></a>.
 <p>
 If you plan to use a sync method on the map, call <a href="ServiceFactory.html#toNonCooperative()"><code>ServiceFactory.toNonCooperative()</code></a> on the returned factory.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>K</code> - key type</dd>
<dd><code>V</code> - value type</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mapName</code> - name of the map used as service</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the service factory</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.0</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="sharedService(com.hazelcast.function.FunctionEx)">sharedService</a></h3>
<div class="memberSignature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
</span><span class="modifiers">public static</span>&nbsp;<span class="typeParameters">&lt;S&gt;</span>&nbsp;<span class="returnType"><a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;S&gt;</span>&nbsp;<span class="memberName">sharedService</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="../../function/FunctionEx.html" title="interface in com.hazelcast.function">FunctionEx</a>&lt;? super <a href="../core/ProcessorSupplier.Context.html" title="interface in com.hazelcast.jet.core">ProcessorSupplier.Context</a>,&#8203;S&gt;&nbsp;createServiceFn)</span></div>
<div class="block">A variant of <a href="#sharedService(com.hazelcast.function.FunctionEx,com.hazelcast.function.ConsumerEx)"><code>sharedService(createFn, destroyFn)</code></a> with a no-op <code>
 destroyFn</code>.
 <p>
 <strong>Note:</strong> if your service has a blocking API (e.g., doing
 synchronous IO or acquiring locks), you must call <a href="ServiceFactory.html#toNonCooperative()"><code>ServiceFactory.toNonCooperative()</code></a> as a hint to the Jet execution engine
 to start a dedicated thread for those calls. Failing to do this can
 cause severe performance problems. You should also carefully consider
 how much local parallelism you need for this step since each parallel
 tasklet needs its own thread. Call <a href="GeneralStage.html#setLocalParallelism(int)"><code>stage.setLocalParallelism()</code></a> to set an explicit level, otherwise it will
 depend on the number of cores on the Jet machine, which makes no sense
 for blocking code.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>4.0</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="sharedService(com.hazelcast.function.FunctionEx,com.hazelcast.function.ConsumerEx)">sharedService</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="typeParameters">&lt;S&gt;</span>&nbsp;<span class="returnType"><a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;S&gt;</span>&nbsp;<span class="memberName">sharedService</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="../../function/FunctionEx.html" title="interface in com.hazelcast.function">FunctionEx</a>&lt;? super <a href="../core/ProcessorSupplier.Context.html" title="interface in com.hazelcast.jet.core">ProcessorSupplier.Context</a>,&#8203;S&gt;&nbsp;createServiceFn,
<a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="../../function/ConsumerEx.html" title="interface in com.hazelcast.function">ConsumerEx</a>&lt;S&gt;&nbsp;destroyServiceFn)</span></div>
<div class="block">Returns a <a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline"><code>ServiceFactory</code></a> which will provide a single shared
 service object per cluster member. All parallel processors serving the
 associated pipeline stage will use the same object. Since the service
 object will be accessed from many parallel threads, it must be
 thread-safe.
 <p>
 <strong>Note:</strong> if your service has a blocking API (e.g., doing
 synchronous IO or acquiring locks), you must call <a href="ServiceFactory.html#toNonCooperative()"><code>ServiceFactory.toNonCooperative()</code></a> as a hint to the Jet execution engine
 to start a dedicated thread for those calls. Failing to do this can
 cause severe performance problems. You should also carefully consider
 how much local parallelism you need for this step since each parallel
 tasklet needs its own thread. Call <a href="GeneralStage.html#setLocalParallelism(int)"><code>stage.setLocalParallelism()</code></a> to set an explicit level, otherwise it will
 depend on the number of cores on the Jet machine, which makes no sense
 for blocking code.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>S</code> - type of the service object</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>createServiceFn</code> - the function that creates the service. It will be called once on each
                        Jet member.</dd>
<dd><code>destroyServiceFn</code> - the function that destroys the service. It will be called once on each
                         Jet member. It can be used to tear down any resources acquired by the
                         service.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#nonSharedService(com.hazelcast.function.FunctionEx,com.hazelcast.function.ConsumerEx)"><code>nonSharedService(FunctionEx, ConsumerEx)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="nonSharedService(com.hazelcast.function.FunctionEx)">nonSharedService</a></h3>
<div class="memberSignature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
</span><span class="modifiers">public static</span>&nbsp;<span class="typeParameters">&lt;S&gt;</span>&nbsp;<span class="returnType"><a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;S&gt;</span>&nbsp;<span class="memberName">nonSharedService</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="../../function/FunctionEx.html" title="interface in com.hazelcast.function">FunctionEx</a>&lt;? super <a href="../core/Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>,&#8203;? extends S&gt;&nbsp;createServiceFn)</span></div>
<div class="block">A variant of <a href="#nonSharedService(com.hazelcast.function.FunctionEx,com.hazelcast.function.ConsumerEx)"><code>nonSharedService(createFn, destroyFn)</code></a> with a no-op <code>
 destroyFn</code>.
 <p>
 <strong>Note:</strong> if your service has a blocking API (e.g., doing
 synchronous IO or acquiring locks), you must call <a href="ServiceFactory.html#toNonCooperative()"><code>ServiceFactory.toNonCooperative()</code></a> as a hint to the Jet execution engine
 to start a dedicated thread for those calls. Failing to do this can
 cause severe performance problems. You should also carefully consider
 how much local parallelism you need for this step since each parallel
 tasklet needs its own thread. Call <a href="GeneralStage.html#setLocalParallelism(int)"><code>stage.setLocalParallelism()</code></a> to set an explicit level, otherwise it will
 depend on the number of cores on the Jet machine, which makes no sense
 for blocking code.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>4.0</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="nonSharedService(com.hazelcast.function.FunctionEx,com.hazelcast.function.ConsumerEx)">nonSharedService</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="typeParameters">&lt;S&gt;</span>&nbsp;<span class="returnType"><a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline">ServiceFactory</a>&lt;?,&#8203;S&gt;</span>&nbsp;<span class="memberName">nonSharedService</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="../../function/FunctionEx.html" title="interface in com.hazelcast.function">FunctionEx</a>&lt;? super <a href="../core/Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>,&#8203;? extends S&gt;&nbsp;createServiceFn,
<a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="../../function/ConsumerEx.html" title="interface in com.hazelcast.function">ConsumerEx</a>&lt;? super S&gt;&nbsp;destroyServiceFn)</span></div>
<div class="block">Returns a <a href="ServiceFactory.html" title="class in com.hazelcast.jet.pipeline"><code>ServiceFactory</code></a> which creates a separate service
 instance for each parallel Jet processor. The number of processors on
 each cluster member is dictated by <a href="GeneralStage.html#setLocalParallelism(int)"><code>stage.localParallelism</code></a>. Use this when the service instance should not
 be shared across multiple threads.
 <p>
 <strong>Note:</strong> if your service has a blocking API (e.g., doing
 synchronous IO or acquiring locks), you must call <a href="ServiceFactory.html#toNonCooperative()"><code>ServiceFactory.toNonCooperative()</code></a> as a hint to the Jet execution engine
 to start a dedicated thread for those calls. Failing to do this can
 cause severe performance problems. You should also carefully consider
 how much local parallelism you need for this step since each parallel
 tasklet needs its own thread. Call <a href="GeneralStage.html#setLocalParallelism(int)"><code>stage.setLocalParallelism()</code></a> to set an explicit level, otherwise it will
 depend on the number of cores on the Jet machine, which makes no sense
 for blocking code.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>S</code> - type of the service object</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>createServiceFn</code> - the function that creates the service. It will be called once per
                        processor instance.</dd>
<dd><code>destroyServiceFn</code> - the function that destroys the service. It will be called once per
                         processor instance. It can be used to tear down any resources
                         acquired by the service.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#sharedService(com.hazelcast.function.FunctionEx,com.hazelcast.function.ConsumerEx)"><code>sharedService(FunctionEx, ConsumerEx)</code></a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ServiceFactories.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2020 <a href="http://www.hazelcast.com/">Hazelcast, Inc.</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
