<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_162) on Fri Oct 18 12:13:54 UTC 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>CPSubsystemManagementService (hazelcast-jet-distribution 3.2 API)</title>
<meta name="date" content="2019-10-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CPSubsystemManagementService (hazelcast-jet-distribution 3.2 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CPSubsystemManagementService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/hazelcast/cp/CPSubsystem.html" title="interface in com.hazelcast.cp"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/hazelcast/cp/CPSubsystemManagementService.html" target="_top">Frames</a></li>
<li><a href="CPSubsystemManagementService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.hazelcast.cp</div>
<h2 title="Interface CPSubsystemManagementService" class="title">Interface CPSubsystemManagementService</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="typeNameLabel">CPSubsystemManagementService</span></pre>
<div class="block">The public API for managing CP members and groups.

 Unlike the dynamic nature of Hazelcast clusters, the CP subsystem requires
 manual intervention while expanding / shrinking its size, or when
 a CP member crashes or becomes unreachable. When a CP member becomes
 unreachable, it cannot be automatically removed from the CP subsystem
 because it could be still alive and partitioned away.
 <p>
 Moreover, the current CP subsystem implementation works only in memory
 without persisting any state to disk. It means that a crashed CP member
 will not be able to recover by reloading its previous state. Therefore,
 crashed CP members create a danger for gradually losing majority of
 CP groups and eventually total loss of the availability of the CP subsystem.
 To prevent such situations, <a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html" title="interface in com.hazelcast.cp"><code>CPSubsystemManagementService</code></a> offers
 APIs for dynamic management of CP members.
 <p>
 The CP subsystem relies on Hazelcast's failure detectors to test
 reachability of CP members. Before removing a CP member from
 the CP subsystem, please make sure that it is declared as unreachable by
 Hazelcast's failure detector and removed from Hazelcast's member list.
 <p>
 CP member additions and removals are internally handled by performing
 a single membership change at a time. When multiple CP members are shutting
 down concurrently, their shutdown process is executed serially. First,
 the Metadata CP group creates a membership change plan for CP groups. Then,
 the scheduled changes are applied to the CP groups one by one.
 After all removals are done, the shutting down CP member is removed from
 the active CP members list and its shutdown process is completed.
 <p>
 When a CP member is being shut down, it is replaced with another available
 CP member in all of its CP groups, including the Metadata group, in order to
 not to decrease or more importantly not to lose the majority of CP groups.
 If there is no available CP member to replace a shutting down CP member in a
 CP group, that group's size is reduced by 1 and its majority value is
 recalculated.
 <p>
 A new CP member can be added to the CP subsystem to either increase
 the number of available CP members for new CP groups or to fulfill
 the missing slots in the existing CP groups. After the initial Hazelcast
 cluster startup is done, an existing Hazelcast member can be be promoted to
 the CP member role. This new CP member automatically joins to CP groups that
 have missing members, and the majority value of these CP groups is
 recalculated.
 <p>
 A CP member may crash due to hardware problems or a defect in user code,
 or it may become unreachable because of connection problems, such as network
 partitions, network hardware failures, etc. If a CP member is known to be
 alive but only has temporary communication issues, it will catch up the
 other CP members and continue to operate normally after its communication
 issues are resolved. If it is known to be crashed or communication issues
 cannot be resolved in a short time, it can be preferable to remove this CP
 member from the CP subsystem, hence from all its CP groups. In this case,
 the unreachable CP member should be terminated to prevent any accidental
 communication with the rest of the CP subsystem.
 <p>
 When the majority of a CP group is lost for any reason, that CP group cannot
 make progress anymore. Even a new CP member cannot join to this CP group,
 because membership changes also go through the Raft consensus algorithm.
 For this reason, the only option is to force-destroy the CP group via the
 <a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#forceDestroyCPGroup-java.lang.String-"><code>forceDestroyCPGroup(String)</code></a> API. When this API is used, the CP
 group is terminated non-gracefully, without the Raft algorithm mechanics.
 Then, all CP data structure proxies that talk to this CP group fail with
 <a href="../../../com/hazelcast/cp/exception/CPGroupDestroyedException.html" title="class in com.hazelcast.cp.exception"><code>CPGroupDestroyedException</code></a>. However, if a new proxy is created
 afterwards, then this CP group will be re-created from scratch with a new
 set of CP members. Losing majority of a CP group can be likened to
 partition-loss scenario of AP Hazelcast.
 <p>
 Please note that the CP groups that have lost their majority must be
 force-destroyed immediately, because they can block the Metadata CP group
 to perform membership changes.
 <p>
 Loss of the majority of the Metadata CP group is the doomsday scenario for
 the CP subsystem. It is a fatal failure and the only solution is to reset
 the whole CP subsystem state via the <a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#restart--"><code>restart()</code></a> API. To be able to
 reset the CP subsystem, the initial size of the CP subsystem must be
 satisfied, which is defined by <a href="../../../com/hazelcast/config/cp/CPSubsystemConfig.html#getCPMemberCount--"><code>CPSubsystemConfig.getCPMemberCount()</code></a>.
 For instance, <a href="../../../com/hazelcast/config/cp/CPSubsystemConfig.html#getCPMemberCount--"><code>CPSubsystemConfig.getCPMemberCount()</code></a> is 5 and only 1
 CP member is currently alive, when <a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#restart--"><code>restart()</code></a> is called,
 additional 4 regular Hazelcast members should exist in the cluster.
 New Hazelcast members can be started to satisfy
 <a href="../../../com/hazelcast/config/cp/CPSubsystemConfig.html#getCPMemberCount--"><code>CPSubsystemConfig.getCPMemberCount()</code></a>.
 <p>
 <strong>There is a subtle point about graceful shutdown of CP members.
 If there are N CP members in the cluster, <a href="../../../com/hazelcast/core/HazelcastInstance.html#shutdown--"><code>HazelcastInstance.shutdown()</code></a>
 can be called on N-2 CP members concurrently. Once these N-2 CP members
 complete their shutdown, the remaining 2 CP members must be shut down
 serially.
 <p>
 Even though the shutdown API is called concurrently on multiple members,
 the Metadata CP group handles shutdown requests serially. Therefore,
 it would be simpler to shut down CP members one by one, by calling
 <a href="../../../com/hazelcast/core/HazelcastInstance.html#shutdown--"><code>HazelcastInstance.shutdown()</code></a> on the next CP member once the current
 CP member completes its shutdown.
 <p>
 The reason behind this limitation is, each shutdown request internally
 requires a Raft commit to the Metadata CP group. A CP member proceeds to
 shutdown after it receives a response of its commit to the Metadata CP
 group. To be able to perform a Raft commit, the Metadata CP group must have
 its majority available. When there are only 2 CP members left after graceful
 shutdowns, the majority of the Metadata CP group becomes 2. If the last 2 CP
 members shut down concurrently, one of them is likely to perform its Raft
 commit faster than the other one and leave the cluster before the other CP
 member completes its Raft commit. In this case, the last CP member waits for
 a response of its commit attempt on the Metadata group, and times out
 eventually. This situation causes an unnecessary delay on shutdown process
 of the last CP member. On the other hand, when the last 2 CP members shut
 down serially, the N-1th member receives response of its commit after its
 shutdown request is committed also on the last CP member. Then, the last CP
 member checks its local data to notice that it is the last CP member alive,
 and proceeds its shutdown without attempting a Raft commit on the Metadata
 CP group.</strong></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../com/hazelcast/cp/CPMember.html" title="interface in com.hazelcast.cp"><code>CPMember</code></a>, 
<a href="../../../com/hazelcast/config/cp/CPSubsystemConfig.html" title="class in com.hazelcast.config.cp"><code>CPSubsystemConfig</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#awaitUntilDiscoveryCompleted-long-java.util.concurrent.TimeUnit-">awaitUntilDiscoveryCompleted</a></span>(long&nbsp;timeout,
                            <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;timeUnit)</code>
<div class="block">Blocks until CP discovery process is completed, or the timeout occurs,
 or the current thread is interrupted, whichever happens first.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#forceDestroyCPGroup-java.lang.String-">forceDestroyCPGroup</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;groupName)</code>
<div class="block">Unconditionally destroys the given active CP group without using
 the Raft algorithm mechanics.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="../../../com/hazelcast/cp/CPGroup.html" title="interface in com.hazelcast.cp">CPGroup</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#getCPGroup-java.lang.String-">getCPGroup</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>
<div class="block">Returns the active CP group with the given name.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../com/hazelcast/cp/CPGroupId.html" title="interface in com.hazelcast.cp">CPGroupId</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#getCPGroupIds--">getCPGroupIds</a></span>()</code>
<div class="block">Returns all active CP group ids.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../com/hazelcast/cp/CPMember.html" title="interface in com.hazelcast.cp">CPMember</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#getCPMembers--">getCPMembers</a></span>()</code>
<div class="block">Returns the current list of CP members</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../com/hazelcast/cp/CPMember.html" title="interface in com.hazelcast.cp">CPMember</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#getLocalCPMember--">getLocalCPMember</a></span>()</code>
<div class="block">Returns the local CP member if this Hazelcast member is part of
 the CP subsystem, returns null otherwise.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#isDiscoveryCompleted--">isDiscoveryCompleted</a></span>()</code>
<div class="block">Returns whether CP discovery process is completed or not.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#promoteToCPMember--">promoteToCPMember</a></span>()</code>
<div class="block">Promotes the local Hazelcast member to a CP member.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#removeCPMember-java.lang.String-">removeCPMember</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;cpMemberUuid)</code>
<div class="block">Removes the given unreachable CP member from the active CP members list
 and all CP groups it belongs to.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#restart--">restart</a></span>()</code>
<div class="block">Wipes and resets the whole CP subsystem and initializes it
 as if the Hazelcast cluster is starting up initially.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getLocalCPMember--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocalCPMember</h4>
<pre><a href="../../../com/hazelcast/cp/CPMember.html" title="interface in com.hazelcast.cp">CPMember</a>&nbsp;getLocalCPMember()</pre>
<div class="block">Returns the local CP member if this Hazelcast member is part of
 the CP subsystem, returns null otherwise.
 <p>
 This field is initialized when the local Hazelcast member is one of
 the first <a href="../../../com/hazelcast/config/cp/CPSubsystemConfig.html#getCPMemberCount--"><code>CPSubsystemConfig.getCPMemberCount()</code></a> members
 in the cluster and the CP subsystem discovery process is completed.
 <p></p>
 This method fails with <a href="../../../com/hazelcast/core/HazelcastException.html" title="class in com.hazelcast.core"><code>HazelcastException</code></a> if the CP subsystem
 is not enabled.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>local CP member if available, null otherwise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/hazelcast/core/HazelcastException.html" title="class in com.hazelcast.core">HazelcastException</a></code> - if the CP subsystem is not enabled</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#isDiscoveryCompleted--"><code>isDiscoveryCompleted()</code></a>, 
<a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#awaitUntilDiscoveryCompleted-long-java.util.concurrent.TimeUnit-"><code>awaitUntilDiscoveryCompleted(long, TimeUnit)</code></a></dd>
</dl>
</li>
</ul>
<a name="getCPGroupIds--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCPGroupIds</h4>
<pre><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../com/hazelcast/cp/CPGroupId.html" title="interface in com.hazelcast.cp">CPGroupId</a>&gt;&gt;&nbsp;getCPGroupIds()</pre>
<div class="block">Returns all active CP group ids.</div>
</li>
</ul>
<a name="getCPGroup-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCPGroup</h4>
<pre><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="../../../com/hazelcast/cp/CPGroup.html" title="interface in com.hazelcast.cp">CPGroup</a>&gt;&nbsp;getCPGroup(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
<div class="block">Returns the active CP group with the given name.
 There can be at most one active CP group with a given name.</div>
</li>
</ul>
<a name="forceDestroyCPGroup-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceDestroyCPGroup</h4>
<pre><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;forceDestroyCPGroup(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;groupName)</pre>
<div class="block">Unconditionally destroys the given active CP group without using
 the Raft algorithm mechanics. This method must be used only when
 a CP group loses its majority and cannot make progress anymore.
 Normally, membership changes in CP groups, such as CP member promotion
 or removal, are done via the Raft consensus algorithm. However, when
 a CP group loses its majority, it will not be able to commit any new
 operation. Therefore, this method ungracefully terminates the remaining
 members of the given CP group. It also performs a Raft commit to
 the Metadata CP group in order to update status of the destroyed group.
 Once a CP group id is destroyed, all CP data structure proxies created
 before the destroy fails with <a href="../../../com/hazelcast/cp/exception/CPGroupDestroyedException.html" title="class in com.hazelcast.cp.exception"><code>CPGroupDestroyedException</code></a>.
 <p>
 Once a CP group is destroyed, it can be created again with a new set of
 CP members.
 <p>
 This method is idempotent. It has no effect if the given CP group is
 already destroyed.</div>
</li>
</ul>
<a name="getCPMembers--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCPMembers</h4>
<pre><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="../../../com/hazelcast/cp/CPMember.html" title="interface in com.hazelcast.cp">CPMember</a>&gt;&gt;&nbsp;getCPMembers()</pre>
<div class="block">Returns the current list of CP members</div>
</li>
</ul>
<a name="promoteToCPMember--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>promoteToCPMember</h4>
<pre><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;promoteToCPMember()</pre>
<div class="block">Promotes the local Hazelcast member to a CP member.
 <p>
 This method is idempotent.
 If the local member is already in the active CP members list, then this
 method has no effect. When the current member is promoted to a CP
 member, its member UUID is assigned as CP member UUID.
 <p>
 Once the returned <code>Future</code> object is completed, the promoted CP
 member has been added to the CP groups that have missing members, i.e.,
 whose size is smaller than <a href="../../../com/hazelcast/config/cp/CPSubsystemConfig.html#getGroupSize--"><code>CPSubsystemConfig.getGroupSize()</code></a>.
 <p>
 If the local member is currently being removed from
 the active CP members list, then the returned <code>Future</code> object
 will throw <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang"><code>IllegalArgumentException</code></a>.
 <p>
 If there is an ongoing membership change in the CP subsystem when this
 method is invoked, then the returned <code>Future</code> object throws
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a>
 <p>
 If the CP subsystem initial discovery process has not completed when
 this method is invoked, then the returned <code>Future</code> object throws
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If the local member is currently being
         removed from the active CP members list</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - If there is an ongoing membership change
         in the CP subsystem</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - If local member is a lite-member</dd>
</dl>
</li>
</ul>
<a name="removeCPMember-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeCPMember</h4>
<pre><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;removeCPMember(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;cpMemberUuid)</pre>
<div class="block">Removes the given unreachable CP member from the active CP members list
 and all CP groups it belongs to. If any other active CP member
 is available, it will replace the removed CP member in its CP groups.
 Otherwise, CP groups which the removed CP member is a member of will
 shrink and their majority values will be recalculated.
 <p>
 Before removing a CP member from the CP subsystem, please make sure that
 it is declared as unreachable by Hazelcast's failure detector and removed
 from Hazelcast's member list. The behavior is undefined when a running
 CP member is removed from the CP subsystem.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - When another CP member is being removed
         from the CP subsystem</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the given CP member is already
         removed from the CP member list</dd>
</dl>
</li>
</ul>
<a name="restart--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restart</h4>
<pre><a href="../../../com/hazelcast/core/ICompletableFuture.html" title="interface in com.hazelcast.core">ICompletableFuture</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;restart()</pre>
<div class="block">Wipes and resets the whole CP subsystem and initializes it
 as if the Hazelcast cluster is starting up initially.
 This method must be used only when the Metadata CP group loses
 its majority and cannot make progress anymore.
 <p>
 After this method is called, all CP state and data are wiped
 and the CP members start with empty state.
 <p>
 This method can be invoked only from the Hazelcast master member.
 <p>
 This method must not be called while there are membership changes
 in the cluster. Before calling this method, please make sure that
 there is no new member joining and all existing Hazelcast members
 have seen the same member list.
 <p>
 <strong>Use with caution:
 This method is NOT idempotent and multiple invocations can break
 the whole system! After calling this API, you must observe the system
 to see if the restart process is successfully completed or failed
 before making another call.</strong></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - When this method is called on
         a Hazelcast member that is not the Hazelcast cluster master</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if current member count of the cluster
         is smaller than <a href="../../../com/hazelcast/config/cp/CPSubsystemConfig.html#getCPMemberCount--"><code>CPSubsystemConfig.getCPMemberCount()</code></a></dd>
</dl>
</li>
</ul>
<a name="isDiscoveryCompleted--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDiscoveryCompleted</h4>
<pre>boolean&nbsp;isDiscoveryCompleted()</pre>
<div class="block">Returns whether CP discovery process is completed or not.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if CP discovery completed, <code>false</code> otherwise</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#awaitUntilDiscoveryCompleted-long-java.util.concurrent.TimeUnit-"><code>awaitUntilDiscoveryCompleted(long, TimeUnit)</code></a></dd>
</dl>
</li>
</ul>
<a name="awaitUntilDiscoveryCompleted-long-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>awaitUntilDiscoveryCompleted</h4>
<pre>boolean&nbsp;awaitUntilDiscoveryCompleted(long&nbsp;timeout,
                                     <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;timeUnit)
                              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Blocks until CP discovery process is completed, or the timeout occurs,
 or the current thread is interrupted, whichever happens first.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeout</code> - maximum time to wait</dd>
<dd><code>timeUnit</code> - time unit of the timeout</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if CP discovery completed, <code>false</code> otherwise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if interrupted while waiting</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../com/hazelcast/cp/CPSubsystemManagementService.html#isDiscoveryCompleted--"><code>isDiscoveryCompleted()</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CPSubsystemManagementService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/hazelcast/cp/CPSubsystem.html" title="interface in com.hazelcast.cp"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/hazelcast/cp/CPSubsystemManagementService.html" target="_top">Frames</a></li>
<li><a href="CPSubsystemManagementService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="http://www.hazelcast.com/">Hazelcast, Inc.</a>. All rights reserved.</small></p>
</body>
</html>
