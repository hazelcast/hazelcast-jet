<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_202) on Mon Apr 15 21:54:30 EET 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SourceBuilder (hazelcast-jet-distribution 3.0 API)</title>
<meta name="date" content="2019-04-15">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SourceBuilder (hazelcast-jet-distribution 3.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SourceBuilder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/hazelcast/jet/pipeline/SlidingWindowDefinition.html" title="class in com.hazelcast.jet.pipeline"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Batch.html" title="class in com.hazelcast.jet.pipeline"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/hazelcast/jet/pipeline/SourceBuilder.html" target="_top">Frames</a></li>
<li><a href="SourceBuilder.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.hazelcast.jet.pipeline</div>
<h2 title="Class SourceBuilder" class="title">Class SourceBuilder&lt;S&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.hazelcast.jet.pipeline.SourceBuilder&lt;S&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>S</code> - type of the source state object</dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">SourceBuilder&lt;S&gt;</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Top-level class for Jet source builders. Refer to the builder
 factory methods listed below.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.html#batch-java.lang.String-com.hazelcast.jet.function.FunctionEx-"><code>batch(String, FunctionEx)</code></a>, 
<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.html#timestampedStream-java.lang.String-com.hazelcast.jet.function.FunctionEx-"><code>timestampedStream(String, FunctionEx)</code></a>, 
<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.html#stream-java.lang.String-com.hazelcast.jet.function.FunctionEx-"><code>stream(String, FunctionEx)</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Batch.html" title="class in com.hazelcast.jet.pipeline">SourceBuilder.Batch</a>&lt;<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Batch.html" title="type parameter in SourceBuilder.Batch">T</a>&gt;</span></code>
<div class="block">A builder of a batch stream source.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.SourceBuffer.html" title="interface in com.hazelcast.jet.pipeline">SourceBuilder.SourceBuffer</a>&lt;<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.SourceBuffer.html" title="type parameter in SourceBuilder.SourceBuffer">T</a>&gt;</span></code>
<div class="block">The buffer object that the <code>fillBufferFn</code> gets on each call.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Stream.html" title="class in com.hazelcast.jet.pipeline">SourceBuilder.Stream</a>&lt;<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Stream.html" title="type parameter in SourceBuilder.Stream">T</a>&gt;</span></code>
<div class="block">A builder of an unbounded stream source.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.TimestampedSourceBuffer.html" title="interface in com.hazelcast.jet.pipeline">SourceBuilder.TimestampedSourceBuffer</a>&lt;<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.TimestampedSourceBuffer.html" title="type parameter in SourceBuilder.TimestampedSourceBuffer">T</a>&gt;</span></code>
<div class="block">The buffer object that the <code>fillBufferFn</code> gets on each call.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.TimestampedStream.html" title="class in com.hazelcast.jet.pipeline">SourceBuilder.TimestampedStream</a>&lt;<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.TimestampedStream.html" title="type parameter in SourceBuilder.TimestampedStream">T</a>&gt;</span></code>
<div class="block">A builder of an unbounded stream source with timestamps.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static &lt;S&gt;&nbsp;<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Batch.html" title="class in com.hazelcast.jet.pipeline">SourceBuilder.Batch</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.html#batch-java.lang.String-com.hazelcast.jet.function.FunctionEx-">batch</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
     <a href="../../../../com/hazelcast/jet/function/FunctionEx.html" title="interface in com.hazelcast.jet.function">FunctionEx</a>&lt;? super <a href="../../../../com/hazelcast/jet/core/Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>,? extends S&gt;&nbsp;createFn)</code>
<div class="block">Returns a fluent-API builder with which you can create a <a href="../../../../com/hazelcast/jet/pipeline/BatchSource.html" title="interface in com.hazelcast.jet.pipeline">batch source</a> for a Jet pipeline.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static &lt;S&gt;&nbsp;<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Stream.html" title="class in com.hazelcast.jet.pipeline">SourceBuilder.Stream</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.html#stream-java.lang.String-com.hazelcast.jet.function.FunctionEx-">stream</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
      <a href="../../../../com/hazelcast/jet/function/FunctionEx.html" title="interface in com.hazelcast.jet.function">FunctionEx</a>&lt;? super <a href="../../../../com/hazelcast/jet/core/Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>,? extends S&gt;&nbsp;createFn)</code>
<div class="block">Returns a fluent-API builder with which you can create an <a href="../../../../com/hazelcast/jet/pipeline/StreamSource.html" title="interface in com.hazelcast.jet.pipeline">unbounded stream source</a> for a Jet pipeline.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static &lt;S&gt;&nbsp;<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.TimestampedStream.html" title="class in com.hazelcast.jet.pipeline">SourceBuilder.TimestampedStream</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.html#timestampedStream-java.lang.String-com.hazelcast.jet.function.FunctionEx-">timestampedStream</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
                 <a href="../../../../com/hazelcast/jet/function/FunctionEx.html" title="interface in com.hazelcast.jet.function">FunctionEx</a>&lt;? super <a href="../../../../com/hazelcast/jet/core/Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>,? extends S&gt;&nbsp;createFn)</code>
<div class="block">Returns a fluent-API builder with which you can create an <a href="../../../../com/hazelcast/jet/pipeline/StreamSource.html" title="interface in com.hazelcast.jet.pipeline">unbounded stream source</a> for a Jet pipeline.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="batch-java.lang.String-com.hazelcast.jet.function.FunctionEx-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>batch</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
public static&nbsp;&lt;S&gt;&nbsp;<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Batch.html" title="class in com.hazelcast.jet.pipeline">SourceBuilder.Batch</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;batch(<a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
                                                           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
                                                           <a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
                                                           <a href="../../../../com/hazelcast/jet/function/FunctionEx.html" title="interface in com.hazelcast.jet.function">FunctionEx</a>&lt;? super <a href="../../../../com/hazelcast/jet/core/Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>,? extends S&gt;&nbsp;createFn)</pre>
<div class="block">Returns a fluent-API builder with which you can create a <a href="../../../../com/hazelcast/jet/pipeline/BatchSource.html" title="interface in com.hazelcast.jet.pipeline">batch source</a> for a Jet pipeline. The source will use
 <a href="../../../../com/hazelcast/jet/core/Processor.html#isCooperative--">non-cooperative</a> processors.
 <p>
 Each parallel processor that drives your source has its private instance
 of a state object it gets from your <code>createFn</code>. To get the data
 items to emit to the pipeline, the processor repeatedly calls your <code>fillBufferFn</code> with the state object and a buffer object.
 <p>
 Your function should add some items to the buffer, ideally those it has
 ready without having to block. A hundred items at a time is enough to
 eliminate any per-call overheads within Jet. If it doesn't have any
 items ready, it may also return without adding anything. In any case the
 function should not take more than a second or so to complete, otherwise
 you risk interfering with Jet's coordination mechanisms and getting bad
 performance.
 <p>
 Once it has emitted all the data, <code>fillBufferFn</code> must call <a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.SourceBuffer.html#close--"><code>buffer.close()</code></a>. This signals Jet to not call <code>fillBufferFn</code> again and at some later point it will call the <code>destroyFn</code> on the state object.
 <p>
 Unless you call <a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Batch.html#distributed-int-"><code>builder.distributed()</code></a>,
 Jet will create just a single processor that should emit all the data.
 If you do call it, make sure your distributed source takes care of
 splitting the data between processors. Your <code>createFn</code> should
 consult <a href="../../../../com/hazelcast/jet/core/ProcessorMetaSupplier.Context.html#totalParallelism--"><code>ProcessorMetaSupplier.Context.totalParallelism()</code></a> procContext.totalParallelism()}
 and <a href="../../../../com/hazelcast/jet/core/Processor.Context.html#globalProcessorIndex--"><code>Processor.Context.globalProcessorIndex()</code></a> procContext.globalProcessorIndex()}.
 Jet calls it exactly once with each <code>globalProcessorIndex</code> from 0
 to <code>totalParallelism - 1</code> and each of the resulting state objects
 must emit its unique slice of the total source data.
 <p>
 Here's an example that builds a simple, non-distributed source that
 reads the lines from a single text file. Since you can't control on
 which member of the Jet cluster the source's processor will run, the
 file should be available on all members. The source emits one line per
 <code>fillBufferFn</code> call.
 <pre><code>
 BatchSource&lt;String&gt; fileSource = SourceBuilder
         .batch("file-source", x -&gt;
             new BufferedReader(new FileReader("input.txt")))
         .&lt;String&gt;fillBufferFn((in, buf) -&gt; {
             String line = in.readLine();
             if (line != null) {
                 buf.add(line);
             } else {
                 buf.close();
             }
         })
         .destroyFn(BufferedReader::close)
         .build();
 Pipeline p = Pipeline.create();
 BatchStage&lt;String&gt; srcStage = p.drawFrom(fileSource);
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>S</code> - type of the state object</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - a descriptive name for the source (for diagnostic purposes)</dd>
<dd><code>createFn</code> - a function that creates the state object</dd>
</dl>
</li>
</ul>
<a name="stream-java.lang.String-com.hazelcast.jet.function.FunctionEx-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stream</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
public static&nbsp;&lt;S&gt;&nbsp;<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Stream.html" title="class in com.hazelcast.jet.pipeline">SourceBuilder.Stream</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;stream(<a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
                                                             <a href="../../../../com/hazelcast/jet/function/FunctionEx.html" title="interface in com.hazelcast.jet.function">FunctionEx</a>&lt;? super <a href="../../../../com/hazelcast/jet/core/Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>,? extends S&gt;&nbsp;createFn)</pre>
<div class="block">Returns a fluent-API builder with which you can create an <a href="../../../../com/hazelcast/jet/pipeline/StreamSource.html" title="interface in com.hazelcast.jet.pipeline">unbounded stream source</a> for a Jet pipeline. The source will
 use <a href="../../../../com/hazelcast/jet/core/Processor.html#isCooperative--">non-cooperative</a> processors.
 <p>
 Each parallel processor that drives your source has its private instance
 of a state object it gets from your <code>createFn</code>. To get the data
 items to emit to the pipeline, the processor repeatedly calls your <code>fillBufferFn</code> with the state object and a buffer object.
 <p>
 Your function should add some items to the buffer, ideally those it has
 ready without having to block. A hundred items at a time is enough to
 eliminate any per-call overheads within Jet. If it doesn't have any
 items ready, it may also return without adding anything. In any case the
 function should not take more than a second or so to complete, otherwise
 you risk interfering with Jet's coordination mechanisms and getting bad
 performance.
 <p>
 Unless you call <a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Stream.html#distributed-int-"><code>builder.distributed()</code></a>,
 Jet will create just a single processor that should emit all the data.
 If you do call it, make sure your distributed source takes care of
 splitting the data between processors. Your <code>createFn</code> should
 consult <a href="../../../../com/hazelcast/jet/core/ProcessorMetaSupplier.Context.html#totalParallelism--"><code>procContext.totalParallelism()</code></a>
 and <a href="../../../../com/hazelcast/jet/core/Processor.Context.html#globalProcessorIndex--"><code>procContext.globalProcessorIndex()</code></a>.
 Jet calls it exactly once with each <code>globalProcessorIndex</code> from 0
 to <code>totalParallelism - 1</code> and each of the resulting state objects
 must emit its unique slice of the total source data.
 <p>
 Here's an example that builds a simple, non-distributed source that
 polls an URL and emits all the lines it gets in the response:
 <pre><code>
 StreamSource&lt;String&gt; socketSource = SourceBuilder
     .stream("http-source", ctx -&gt; HttpClients.createDefault())
     .&lt;String&gt;fillBufferFn((httpc, buf) -&gt; {
         new BufferedReader(new InputStreamReader(
             httpc.execute(new HttpGet("localhost:8008"))
                  .getEntity().getContent()))
             .lines()
             .forEach(buf::add);
     })
     .destroyFn(Closeable::close)
     .build();
 Pipeline p = Pipeline.create();
 StreamStage&lt;String&gt; srcStage = p.drawFrom(socketSource);
 </code></pre>
 <p>
 <strong>NOTE:</strong> the source you build with this builder is not
 fault-tolerant. You shouldn't use it in jobs that require a processing
 guarantee.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>S</code> - type of the state object</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - a descriptive name for the source (for diagnostic purposes)</dd>
<dd><code>createFn</code> - a function that creates the state object</dd>
</dl>
</li>
</ul>
<a name="timestampedStream-java.lang.String-com.hazelcast.jet.function.FunctionEx-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>timestampedStream</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
public static&nbsp;&lt;S&gt;&nbsp;<a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.TimestampedStream.html" title="class in com.hazelcast.jet.pipeline">SourceBuilder.TimestampedStream</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;timestampedStream(<a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
                                                                                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
                                                                                   <a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
                                                                                   <a href="../../../../com/hazelcast/jet/function/FunctionEx.html" title="interface in com.hazelcast.jet.function">FunctionEx</a>&lt;? super <a href="../../../../com/hazelcast/jet/core/Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>,? extends S&gt;&nbsp;createFn)</pre>
<div class="block">Returns a fluent-API builder with which you can create an <a href="../../../../com/hazelcast/jet/pipeline/StreamSource.html" title="interface in com.hazelcast.jet.pipeline">unbounded stream source</a> for a Jet pipeline. The source can
 emit items with native timestamps, which you can enable by calling
 <a href="../../../../com/hazelcast/jet/pipeline/StreamSourceStage.html#withNativeTimestamps-long-">withNativeTimestamps()</a>. It will use <a href="../../../../com/hazelcast/jet/core/Processor.html#isCooperative--">non-cooperative</a> processors.
 <p>
 Each parallel processor that drives your source has its private instance
 of a state object it gets from the given <code>createFn</code>. To get the
 data items to emit to the pipeline, the processor repeatedly calls your
 <code>fillBufferFn</code> with the state object and a buffer object. The
 buffer's <a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.TimestampedSourceBuffer.html#add-T-long-"><code>add()</code></a> method
 takes two arguments: the item and the timestamp in milliseconds.
 <p>
 Your function should add some items to the buffer, ideally those it has
 ready without having to block. A hundred items at a time is enough to
 eliminate any per-call overheads within Jet. If it doesn't have any
 items ready, it may also return without adding anything. In any case the
 function should not take more than a second or so to complete, otherwise
 you risk interfering with Jet's coordination mechanisms and getting bad
 performance.
 <p>
 Unless you call <a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.TimestampedStream.html#distributed-int-"><code>builder.distributed()</code></a>, Jet will create just a single processor that
 should emit all the data. If you do call it, make sure your distributed
 source takes care of splitting the data between processors. Your <code>createFn</code> should consult <a href="../../../../com/hazelcast/jet/core/ProcessorMetaSupplier.Context.html#totalParallelism--"><code>procContext.totalParallelism()</code></a> and <a href="../../../../com/hazelcast/jet/core/Processor.Context.html#globalProcessorIndex--"><code>procContext.globalProcessorIndex()</code></a>. Jet calls it exactly once with each
 <code>globalProcessorIndex</code> from 0 to <code>totalParallelism - 1</code> and
 each of the resulting state objects must emit its unique slice of the
 total source data.
 <p>
 Here's an example that builds a simple, non-distributed source that
 polls a URL and emits all the lines it gets in the response,
 interpreting the first 9 characters as the timestamp.
 <pre><code>
 StreamSource&lt;String&gt; socketSource = SourceBuilder
     .timestampedStream("http-source", ctx -&gt; HttpClients.createDefault())
     .&lt;String&gt;fillBufferFn((httpc, buf) -&gt; {
         new BufferedReader(new InputStreamReader(
             httpc.execute(new HttpGet("localhost:8008"))
                  .getEntity().getContent()))
             .lines()
             .forEach(line -&gt; {
                 long timestamp = Long.valueOf(line.substring(0, 9));
                 buf.add(line.substring(9), timestamp);
             });
     })
     .destroyFn(Closeable::close)
     .build();
 Pipeline p = Pipeline.create();
 StreamStage&lt;String&gt; srcStage = p.drawFrom(socketSource)
         .withNativeTimestamps(SECONDS.toMillis(5));
 </code></pre>
 <p>
 <strong>NOTE 1:</strong> the source you build with this builder is not
 fault-tolerant. You shouldn't use it in jobs that require a processing
 guarantee. Use a <a href="../../../../com/hazelcast/jet/pipeline/Sources.html#streamFromProcessorWithWatermarks-java.lang.String-java.util.function.Function-boolean-">custom processor</a> if you need fault tolerance.
 <p>
 <strong>NOTE 2:</strong> if the data source you're adapting to Jet is
 partitioned, you may run into issues with event skew between partitions
 assigned to single parallel processor. The timestamp you get from one
 partition may be significantly behind the timestamp you already got from
 another partition. If the skew is more than the allowed lag you
 <a href="../../../../com/hazelcast/jet/pipeline/StreamSourceStage.html#withNativeTimestamps-long-">configured</a>,
 you risk that the events will be dropped. Use a <a href="../../../../com/hazelcast/jet/pipeline/Sources.html#streamFromProcessorWithWatermarks-java.lang.String-java.util.function.Function-boolean-">custom processor</a> if you need
 to coalesce watermarks from multiple partitions.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>S</code> - type of the state object</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - a descriptive name for the source (for diagnostic purposes)</dd>
<dd><code>createFn</code> - a function that creates the state object</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SourceBuilder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/hazelcast/jet/pipeline/SlidingWindowDefinition.html" title="class in com.hazelcast.jet.pipeline"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/hazelcast/jet/pipeline/SourceBuilder.Batch.html" title="class in com.hazelcast.jet.pipeline"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/hazelcast/jet/pipeline/SourceBuilder.html" target="_top">Frames</a></li>
<li><a href="SourceBuilder.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="http://www.hazelcast.com/">Hazelcast, Inc.</a>. All rights reserved.</small></p>
</body>
</html>
